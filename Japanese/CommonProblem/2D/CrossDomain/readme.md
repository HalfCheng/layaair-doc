#ドメインをまたぐ処理

多くの新米開発者がDemoを作って実行した時、資源が表示されない問題（コードが完全に正しい場合）が発生する可能性があります。ブラウザのコンソールを開けば、資源がドメインを超えていることが分かります。

ヒントの内容は以下の通りです。

*No'Access-Coontrol-Origin'header is present on the requested reource.Origin'file:/'is therefore not allowed access.*

**なぜ国境を越えるのですか？**

ブラウザがデフォルトの場合、ローカルファイルを読み込むと、クロスドメインアクセスの問題が発生します。これです**国境をまたぐ**。

**クロスドメイン問題はどう解決しますか？**

二分される。一つはファイル要求がドメインをまたぐことであり、一つはデータ要求がドメインをまたぐことである。

#####1.ファイル要求のクロスドメイン

ファイル要求のドメインをまたぐ解決方法には、ブラウザに起動パラメータを追加する方法があります。ここでchromeを例にとって、chromeブラウザショートカットで開くアイコンを選択します。右クリックでプロパティを開きます。ショートカットの欄を開きます。下図のように：

![1](img\1.png)（図1）

この時に開いているすべてのchromeブラウザのページをすべて閉じて再起動すればいいです。

**以上の方法はローカルデバッグの問題しか解決できません。他のホストが存在するクロスドメイン問題を解決できません。**。ファイルのドメイン間の問題を徹底的に解決するにはwebServer（一般的なwebserverの多くはapphe、nginx、tomcatなど）を修正し、特定のドメイン名を要求してドメイン間の標識を追加します。ここではnginxを例にします。


```

http {

  ......

  add_header Access-Control-Allow-Origin *;

  add_header Access-Control-Allow-Headers X-Requested-With;

  add_header Access-Control-Allow-Methods GET,POST,OPTIONS;

  ......

}

```


このようにGET、POST、OPTIONSのドメイン横断要求のサポートを実現できます。addcander Access-Coontrol-Originもできます。[http://www.layabox.com;](http://www.layabox.com%3B/)--許可のurlを指定します。

#####2.データ要求のクロスドメイン

データ要求はドメインをまたぐにはバックエンドの修正が必要で、リガでheaderの標識を要求しています。ここではphp言語を例にしています。


```

header("Access-Control-Allow-Origin: *");
```


必ずしも*を使ってはいけません。すべてのホストがドメインを越えてアクセスすることができます。開発者も指定されたドメイン名の下のホストを書いてこそアクセスできます。



**WeChatの顔写真については、ドメインを横断します。**

バックグラウンドで画像を自分のサーバーにダウンロードして、自分のサーバーを通じて画像リソースにアクセスすることができます。