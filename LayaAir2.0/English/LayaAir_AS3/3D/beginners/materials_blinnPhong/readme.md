##BlinnPhong Material of LayaAir3D

###Overview of BlinnPhong Material

In the previous version of Laaya Air 3D engine (before version 1.7.12), the model material only supports the traditional PBRStandard Material standard material. In Unity, no matter what type of Shader the model material uses, the plug-in exports the standard material (except particle material).

Because the standard and other materials in Unity are different from those in LayaAir, when developers use the exported 3D resources, we will find that the effect of art will be different from that in Unity. It is inconvenient for developers to modify the properties of various materials or adjust the lighting in the code to achieve the desired effect.

In order to make the operation of the LayaAir engine consistent with the fine art in Unity, LayaAir official adds BlinnPhongMaterial material to the Unity export plug-in and the engine, allowing developers to see what they get, reducing the time of code modification and improving the work efficiency. Therefore, it is suggested that the material should be used as far as possible in future development.



###Create BlinnPhong Material

Code creation BlinnPhong material is the same as standard material, you can create its instance directly, or load related material resource creation through BlinnPhongMaterial. load () method, and assign it to the model. The way to modify and assign the light and color attributes is the same as the standard material, but the material type is different.


```java

//添加自定义模型
var box = scene.addChild(new Laya.MeshSprite3D(new Laya.BoxMesh(1, 1, 1)));
box.transform.rotate(new Laya.Vector3(0, 45, 0), false, false);
//创建材质
var material = new Laya.BlinnPhongMaterial();
Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, function(tex) {
  material.albedoTexture = tex;
}));
//加载材质资源方法创建
// var mat = Laya.BlinnPhongMaterial.load("truck/Assets/Materials/t0200.lmat")
//为模型赋材质
box.meshRenderer.material = material;
```




###Using BlinnPhong Material in Unity

LayaAir engine supports BlinnPhong material creation from 1.7.12 and Unty export plug-ins from 1.7.0, so developers need to download new engines and plug-ins to experience new functions. Installing 1.7.0 plug-ins in a project is exactly the same as installing plug-ins in previous versions.

####Scene One-click Conversion to BlinnPhong Material

After installing the new plug-in, a key is added to the Untiy LayaAir3D menu to convert the scene material into BlinnPhong material (Figure 1). Clicking on the menu LayaAir Tool - --> Switch Shader to LayaBlinnPhong option, you can find that the model in the resource interface will become purple, and the effect in the scene will also change, indicating that the material type has been modified successfully.

![图片1](img/1.png)<br>（图1）


By selecting any model in the scene with the mouse, we can see that a new Shader type of material appears in the Inspector panel on the right (Figure 2). The material properties are different from the standard materials in unity, which are much simplified and some properties not supported by layaair are removed. We can change the display of the model by modifying these attributes.

![图片2](img/2.png)<br> (Figure 2)



####Manually change to a blinnphong material

In general, we recommend using a key in the menu to convert to BlinnPhong material, so that all materials in the scene will be modified, and no material can not be found or ignored, resulting in the unmodified situation.

Of course, when creating new materials, standard materials are generated by default, which requires developers to manually modify the Shader type of materials to BlinnPhong. When we install the plug-in, the LayaAir3D option appears in the Shader type of the Material Panel for our modification. (Fig. 3)

![图片3](img/3.gif)<br> (Figure 3)





###BlinnPhong Material Rendering Mode

RenderMode is mainly used for the rendering of materials, such as different transparent and translucent effects. There are more than ten types of RenderMode in PBRStandard Material, but it is complex and needs code modification, which is very inconvenient.

Export plug-in provides BlinnPhong material modification interface, which can directly modify the rendering mode, and it has been reduced in BlinnPhong material, summarizes several commonly used types. With its modification, developers can easily adjust the material effect.

The Advanced Properties option in the BlinnPhong Material Panel varies with the type chosen.

Type description is as follows:

**Opaque material opaque**。 Without any transparency effect, even if there is translucency in the texture, the model will not have translucency effect.

**Cutout material transparent cutting**。  According to the alpha value of transparent pixels in the texture, transparent alpha value can also be adjusted in Utniy according to the situation, less than a certain alpha value part of the model transparency (Figure 4).

Tips: This kind of transparent, edge with pixel sawtooth, but the performance is higher. If you want to remove the sawtooth effect, please choose Transparent type, the performance is slightly lower.

![图片4](img/4.png)<br> (Figure 4)

**Transparent material translucent**。 According to the alpha value of the pixels in the texture, the transparency effect is the same as the alpha transparency effect of the pixels, and the effect of de-aliasing is better.

**Addtive material transparent color mixing**。  It is mainly used for some transparent materials with high color brightness. It will mix color according to the brightness of the paste pixels. The color of the front and back of the model and the overlapping model will overlap each other to form a high-brightness translucent effect (Fig. 5).

![图片5](img/5.png)<br> (Fig. 5)



**Custom Material Customization Effect**。  These four rendering modes basically include most of the effects in game development. If they can not satisfy the artistic needs of developers, Custom can also customize the rendering mode settings.

Among the four types of modes mentioned above, the Advanced Properties option is basically fixed and cannot be modified. In Custom customization, developers can manually modify its parameter values, which is more effective, and achieve the desired artistic effect in repeated settings modification.

![图片6](img/6.png)<br> (Fig. 6)



###BlinnPhong Material Luminous Mapping Properties

BlinnPhong Material Material Luminous Mapping Attributes are basically the same as the standard material. In Unity Material Panel, the following attributes can be adjusted:

**Diffuse reflection color and mapping**。

**Specular highlight color and texture.**The adjusting slider of the highlight range is added, and the highlight range can be adjusted even without using the highlight mapping.

**Normal Normal Mapping.**

After the above light and color maps are set up in Unty, they can be loaded directly or run by pressing the LayaAir Run button in the export plug-in. It can be found that the effect of art in browser is the same as that of camera view in Unity.
