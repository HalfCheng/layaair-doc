# 微信小游戏入门介绍

> Author: charley

##### 首先，我们要了解什么是微信小游戏？

小游戏官方的解释是：

> 微信小游戏是微信小程序的一个类目，它即点即玩，无需下载安装，体验轻便，可以和微信内的好友一起玩，比如PK、围观等。

即点即玩，无需下载安装。这应该就是H5游戏了吧？

怎么解释呢？这要先从H5的定义说起……

通常大家都认为H5就是HTML5的简称，但是在开发者的眼里，HTML5只是一个WEB技术标准，符合这个标准的，并且能在浏览器里运行的游戏才是HTML5游戏。而更多的人，对技术了解不多。为了便于理解，把即点即玩，无需下载安装的游戏都称之为H5游戏，还有人叫手机页游。

微信小游戏的运行环境并不是浏览器，也不能在浏览器中运行，而是运行于微信APP中的Runtime。尽管微信小游戏的接口兼容大部分Canvas和Webgl，具有即点即玩，无需下载安装的HTML5特性。显然，从严格的定义来讲，微信小游戏不是标准的HTML5游戏。

**那么，**如何能做到开发的游戏还能在浏览器中也运行起来呢？

#### 开发者只能使用微信小游戏的开放API开发吗？

带着这两个问题，我们继续介绍。

众所周知，LayaAir引擎是基于HTML5的全平台引擎，既然是全平台，那当然不能错过微信小游戏啦！

所以，在微信小游戏发布的当天，LayaAir引擎也为开发者推出微信小游戏的适配库。自LayaAir 1.7.14版开始，开发者下载最新版本引擎或IDE，只需要按照适配教程文档，初始化一下适配程序，即可将HTML5游戏项目无缝适配为微信小游戏项目。

这样，通过LayaAir引擎开发出来的项目，不仅可以运行在浏览器中、或者打包成为APP（iOS与Android）、还可以运行在微信小游戏的平台中。

或许，开发者还想了解，既然微信小游戏不是HTML5，

#### 那在开发的过程中需要注意哪些差异呢？

如果是采用微信官方API开发的话，还是要有一些要注意的，比如不支持DOM与BOM、小游戏只能有一个画布、不支持Eval、不支持XML等等……

但是，

对于LayaAir引擎的开发者来讲，不用刻意去了解到底有哪些差异，按照正常的LayaAir引擎开发规则去开发就可以了。开发完成后，直接点击项目发布按钮，可一键发布为微信小游戏项目。如图1所示。

![图1](img/7.png)  

（图1）

那么LayaAir引擎的项目，经过一键发布后全部都能在微信真机环境里跑起来吗？理论上是都可以支持的，除非是使用了小游戏不支持的第三方库，或者微信小游戏底层自身有BUG，比如遮罩与cacheAs最开始就不支持，后来经过与小游戏官方技术沟通后已经支持了，但是有的机器微信版本没有更新到修复后的版本，可能还会出问题，如果有花屏现象的，多数是因为使用了cacheAs，所以建议谨慎使用遮罩与cacheAs。

另外由于微信小游戏不允许引擎来控制canvas的大小。小游戏的canvas大小是自动拉伸的。所以会导致LayaAir部分适配模式无效，推荐使用fixedauto、或者full适配模式。

对于已经采用LayaAir引擎开发完成的老项目，**替换最新版本引擎类库后**，在主程序入口的Laya.init()之前，调用MiniAdpter.init()这个方法，去初始化一下适配程序，即可完美支持微信小游戏。

**AS3版本的适配初始化**

```java
//AS3版本初始化微信小游戏的适配
MiniAdpter.init();
//初始化引擎
Laya.init(1136,640);
```

**TypeScript或JavaScript版本适配初始化：**

```javascript
//TS或JS版本初始化微信小游戏的适配
Laya.MiniAdpter.init();
//初始化引擎
Laya.init(1136,640);
```

> Tips: 老项目适配有专门的文档进行介绍，欢迎前往。



其它关于小游戏自身的介绍，请直接去小游戏官方文档查看。

[https://developers.weixin.qq.com/minigame/dev/index.html](https://developers.weixin.qq.com/minigame/dev/index.html)

强烈推荐要看一看小游戏官方文档，LayaAir引擎的文档更多的是引擎相关的，当然也会混合了一些小游戏接口的应用介绍，但是仔细看看官方文档肯定没错。