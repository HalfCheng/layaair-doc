#材質アニメーションの使用

###### *version :2.1.0beta   Update:2019-6-13*

材質アニメーションは材質の色とスタンプを変えてアニメーションを行います。

3次元ソフトウェアでは、例えば3 ds maxでは、材質関連動画を作成することができますが、FBX形式にエクスポートした場合、unityは認識できず、LayaAir 3 Dエンジンで識別された材質アニメーションとして導出することができません。したがって、ゲームモデルの材質アニメーションはunityで作られなければなりません。いくつかの設定を行ってエクスポートしたらLayaAir 3 Dエンジンに使用できます。

次に、ネオン素材の動画（図1）の効果を用いて、ユニティでアニメーションを作成し、その使い方を説明します。手順は以下の通りです。

！[](img/1.gif)<br/>(図1)

####材質の種類を変更

ユニティにcubeをドラッグして材質を変更します。

！[](img/2 png)<br/>(図2)

####材質アニメーションの作成

1、材質のタイプを修正したら、同じくアニメーションを作るモデルを選択し、メニューバーのwindowをクリックしてアニメーション編集画面を開き、ショートカットキーCtrl+6をクリックします。

2、createボタンをクリックしてアニメーションを作成し、名前を付けます。この例では名前をつけて使っているデフォルトの名前New Animationが、保存後リソースマネージャにアニメーションファイルNew Animationを生成します。

3、時間軸上の時間を選択し、材質の拡散反射色を修正し、繰り返し操作していくつかの色を調整します。

4、アニメーションフレームの曲線の変化を変更して、デフォルトは線型スライド動画で、私達のアニメーションの需要に合わないで、恒量変化に修正して、再生して見て、材質アニメーションは需要に応じて全部完成します。もちろん、流れを作ったり、浮雲を飛ばしたりするアニメーションを作るなら、線型の変化方法があります。

！[](img/3 png)<br/>(図3)

####アニメーションコントローラを作成

前のアニメーションコントローラと同じように、リソースマネージャで右クリックしてアニメーションコントローラを作成し、Cube 1と名づけ、ダブルクリックして開くと、前のステップで作成したアニメーションファイルNew Animationをアニメーションコントローラにドラッグします。

モデルを選択して、アニメーションコントローラをモデルのアニメーションコンポーネントにドラッグして、unityをクリックして実行します。アニメーションは私たちの需要に応じて再生されます。

！[](img/4 gif)<br/>(図4)

####アニメーションリソースをエクスポートして使用します。

unityでアニメーションを編集し、LayaAirプラグインでシーンタイプを導出します。lsリソースは、エクスポート時にエラーが発生していない場合は、プロジェクトのリソースディレクトリにコピーします。プロジェクトで直接使用できます。`Scene3D.load()`メソッドの読み込みまたはプリロード。

以下のコードを参照してください。変色が遅すぎるので、速度を調整しました。


```typescript

//加载场景
Laya.Scene3D.load("res/threeDimen/scene/materialScene/Conventional/layaScene.ls", Laya.Handler.create(this, function(scene) {
    Laya.stage.addChild(scene);
    var camera = scene.getChildByName("Main Camera") as Laya.Camera;
    camera.addComponent(CameraMoveScript);
}));

```


