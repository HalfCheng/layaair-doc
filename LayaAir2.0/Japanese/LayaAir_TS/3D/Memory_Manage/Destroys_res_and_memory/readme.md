#資源を破壊し、メモリを釈放する。

###### *version :2.0.2beta   Update:2019-5-8*

#####なぜ資源の解放が必要なのかについて：

LayaAir 3 Dゲームの開発において、資源の放出は非常に重要です。3 Dリソースは、モデル、スタンプ、材質、アニメーションなどを含み、良い画面効果を達成するために、ファイルは2 Dよりも大きくなります。3 Dエンジンは基本的にすべてのリソースをGPUに入れて計算してレンダリングしますので、多くの現存を占めています。ゲームのレベルがどんどん読み込まれて、ゲームがどんどん深くなって、現存中の資源がだんだん多くなります。資源を解放しないと、ゲームは最終的に崩壊します。

現存はメモリと違って、メモリはゴミ回収の仕組みがあります。現存は違っています。手動で釈放しなければならないので、現存する資源の放出は重視されなければなりません。

今回の使用例は、**リソースの読み込み**の**リソースの読み込み**の例では簡単に修正できます。

単一の資源破壊に対してメモリをリリースするには、当該リソースのオブジェクトを呼び出す必要があります。`destroy()`方法。

>グリッドの例で使用しているグリッドは単独でプリセットされているものと同じグリッドですので、この例を書く前にLayaMonkeyフォルダをコピーしました。LayaMonkey 2という名前が付けられています。ローディング例とは区別しやすいです。使用しているグリッドを破壊するとエラーが発生します。


```typescript

//加载Mesh
Laya.Mesh.load("res/threeDimen/skinModel/LayaMonkey2/Assets/LayaMonkey/LayaMonkey-LayaMonkey.lm", Laya.Handler.create(this, function(mesh:Laya.Mesh):void {
  	........
    //上面省略，我们再网格加载完成3秒后对该网格进行销毁
    Laya.timer.once(3000,this,function ():void
    {
        //销毁了使用了该网格的精灵
        layaMonkey.destroy();
        //对网格进行销毁
        mesh.destroy();        
    });
}));
```


**読み込み完了**

資源の全部のロードが完了したら、67.26 Mの現存、10.13 Mのメモリが見られます。

このグリッドを使った精霊を単純に廃棄すると、グリッド資源自体を処理しなくても、現存は減少しません。グリッド資源はまだ現存中です。（開発者は自分で注釈してグリッドに対してその行のコードを破壊して効果を見ることができます。）

！[](img/1.png)<br/>(図1)

**破壊を実行した後**

！[](img/2 png)<br/>(図2)

破壊コードを実行した後、明らかに67.5 Mの現存があり、10.04 Mのメモリがあります。グリッドモデルは取り外され、リソースは破壊されました。

他のリソースタイプに対応して、Mesh、Material、Texture 2 Dなどは同じ方法で資源を廃棄することができます。
