#プロジェクト発表2.0の詳細

>author：charley version：LayaAir IDE 2..0正式版udate：2019-11-16

プロジェクトメニューの発表機能は非常に核心的な機能で、通常はゲームのJS合併、JS圧縮と混淆、写真圧縮、バージョン管理、ゲームの異なるプラットフォームの適応などに用いられます。プロジェクトの開発が完了したり、段階的に開発が完了したり、生産環境に提出してテストを行う場合には、プロジェクトが発表する機能が一般的に使われます。

![1](img/1.png)   


（図1）



プロジェクトメニューでは、プロジェクトリリース機能の画面を開きます。

###1、リリースプラットフォーム

リリースプラットフォームには現在四つの選択肢があります。それぞれweb/Native、微信小ゲーム、QQライトゲーム、Baiduのミニゲームです。図1に示すように。

`web/Native`HTML 5バージョンとしてリリースされ、ブラウザ環境またはLayaNativeのAPP環境で実行されます。

`微信小游戏`WeChat型ゲームに適したアイテムとしてリリースされ、リリース後のアイテムはWeChat開発者のツール内で実行できます。

`QQ轻游戏`携帯電話のQQという軽いゲーム項目を発表して、携帯電話のQQの軽いゲームのプラットフォームの中で実行します。

`百度小游戏`は、Baiduのゲームに適したプロジェクトとしてリリースされ、リリース後のプロジェクトは、Baiduの開発者のツール内で実行することができます（Baiduのゲームについては、関連するドキュメントを読むことができます）。

###2、ソースディレクトリ

ソースディレクトリとはリリースされたバージョンファイルのことです。**ソースディレクトリ**デフォルトはbinディレクトリで、このディレクトリは変更しないでください。

###3、カタログを発表する

リリースディレクトリはリリースするものです。**ターゲットディレクトリ**デフォルトではreleaseディレクトリの下でプロジェクトのターゲットでもいいし、プロジェクトとは関係ないディレクトリでもいいです。

###4、プロジェクトを再コンパイルするかどうか

もし開発者がコンパイルを忘れてしまったため、発行されたコードが最近のコードではないかと心配したら、チェックしてください。`是否重新编译项目`チェックを付けると、リリース毎にプロジェクトをコンパイルしてからリリースフローを実行します。コンパイル忘れによるプロジェクトの発表後のエラーを避けることができます。

###5、WeChat/Baiduのオープンデータドメインプロジェクトかどうか

WeChatやBaiduなどのミニゲームのオープンドメインプロジェクトのデフォルトのエントリファイルは、メインドメインのエントリファイルとは異なりますので、チェックしてください。`是否为微信/百度开放数据域项目`後は、自動的に入り口の問題を処理します。開発者が発表するたびに、手動で処理します。開発者のミニゲームのリリースが大幅に増加しました。

####index.html内のすべてのjsファイル（web版）をマージするかどうか

チェックを入れたら、index.html内のjsを分析して、すべてのindex.html内のJSを一つのJSに合併します。

>ウィーチャットゲームの特殊な仕組みに基づいて、ミニゲームを選択しなければならないので、ミニゲームのリリースには表示されません。
>

###6、index.内で引用されたjsファイルだけをコピーするかどうか

チェックして、index.html内で参照しているjsエンジンライブラリファイルのみをreleaseのlibsディレクトリにコピーします。libsで使っていないものは全部コピーします。

###7、圧縮資源

####圧縮を排除する

ソースディレクトリの下にあるディレクトリやファイルを削除するために、複数あればセミコロンを使います。`;`仕切りをする。
注意：圧縮を排除するという機能は、圧縮に関するディレクトリを排除するためにのみ使用されます。

####PNGを圧縮しますか

チェックを付けると、PNGリソースは圧縮されます。パラメータによって品質をコントロールし、リリース時のデフォルト値は、開発者が効果が目標に達していないと思ったら、自分で調整してみてください。

####JPGを圧縮するかどうか

チェックを付けると、JPGリソースは圧縮されます。パラメータによって品質をコントロールし、リリース時のデフォルト値は、開発者が効果が目標に達していないと思ったら、自分で調整してみてもいいです。

####JSONを圧縮しますか

チェックした後、JSONの拡張子のファイルだけではなく、デフォルトでいくつかのよく使われている圧縮が必要なjsonファイルフォーマット（例えば、json、alas、ls、lh、lmat、lav）がリストされています。これらの範囲に該当すると、拡張子は圧縮されます。圧縮が不要な拡張子フォーマットがあれば、そのまま拡張子を外してもいいです。

####圧縮JSを混同していますか

チェックを付けると、JSを圧縮して混淆します。

###8、バージョン管理

####バージョン管理を有効にするかどうか

このオプションをチェックすると、バージョン管理が有効になります。

開発者がバージョン管理を有効にすると、リリース時に自動的にhash文字列のファイル名を生成し、同時に一つのversion.jsonのファイル名マッピングファイルを作成します。バージョン管理クラスResource Versionによる自動関連コードの中の実際のファイル名と名前変更後のバージョン管理制御のファイル。開発者がバージョン管理のファイルを有効にすると、リリース時にファイル名の中のhash文字列が自動的に更新されます。これは実行環境にとって、新しいファイルを呼び出したのに相当します。もちろんキャッシュによる問題はありません。

開発者は開発の過程で、最終的に生成されたファイル名がどのようなものかに注目する必要はありません。さらに、LayaAirIDE 2.0はプロジェクトを作成する際に、自動的にコードにバージョン管理クラスのResource Versionを統合していますので、開発者はResource Version類をどのように使うかについては、注目する必要はありません。バージョン管理を有効にしたい時に、プロジェクトのリリースインターフェースでバージョン管理を有効にするかどうかチェックすればいいです。

####古いリソースファイルを削除しますか？

バージョン管理を有効にすると、どのファイルに変化があっても、新しいバージョンのファイルが生成されますが、デフォルトでは古いバージョンのファイルが保存されます。

`勾选是否删除旧的资源文件`オプションを選択すると、あるファイルが変更され、新しいバージョンのファイルが生成されると、古いバージョンのファイルが削除されます。

###9、ファイル抽出

ファイル抽出機能は主にミニゲームのローカルパッケージの抽出を容易にするためです。

####選択リストをコピー

クリック`复制选择列表`右側の閲覧はbinディレクトリの構造ツリーをイジェクトします。開発者は、ローカルパッケージで使用するコードまたはリソースをチェックします。クリック**を選択します**ツールの選別や指定されたローカルパッケージのコピーを容易にするために、選択されたディレクトリやファイルを保存します。

####ファイルをどこにコピーしますか

クリック`复制文件到哪`右側のブラウズはディレクトリを指定できます。`复制选择列表`で抽出したローカルパッケージの内容はここで指定されたディレクトリにコピーされます。

####後続のスクリプトの実行

ここではコマンドラインで直接実行できるファイル（例えば、windowsの下のexeまたはbat）を指定します。ここで指定された実行可能ファイルをリリース時に呼び出します。

具体的にどこに使いますか？例えば、IDEが持つ圧縮機能は使いにくいという開発者がいます。それは自分で一つ書いてもいいです。あるいはネットで命令行で実行できるプログラムを探してもいいです。直接リリース時に呼び出します。IDEが持つ圧縮機能をもうチェックしなくてもいいです。