#WeChatのよくある質問まとめ

>*author:charley version:2.0.1 udate:2019-03-13*

####1、なぜミニゲームのローカルパッケージに入れたのですか？いくつかのリソースは正常にロードできません。

ローカルパッケージにファイルの拡張子に白いリストが設定されていますので、リスト内にない拡張子ファイルはアップロードできません。自然に使えなくなります。しかし、URLを使って動的にロードして、ローカルパッケージに入れずにアップロードすればいいです。


已知的文件类型白名单为：png、jpg、jpeg、gif、svg、js、json、cer、obj、dae、fbx、mtl、stl、3ds、mp3、pvr、wav、plist、ttf、fnt、gz、ccz、m4a、mp4、bmp、atlas、swf、ani、part、proto、bin、sk、mipmaps、txt、zip、tt、map、ogg、silk、dbbin、dbmv、etc、lmat、lm、ls、lh、lani、lav、lsani、ltc。



####2、なぜゲームはいくつかの機種の上にギザギザがあるのですか？

WeChat 7.0.3以前のバージョンでは、Canvasのキャンバスを強制的にスクリーンの物理サイズに引き伸ばしてフルスクリーン適応を行いますが、7.0.3からは、WeChatはパフォーマンスを考慮して、強制的に引張りません。だから、開発者が物理画面より小さいサイズでエンジンを通した適応モードを設計してstageを大きく引張りますと、ピクセルポイントが完全にスクリーン像に見えなくなります。ピンセットは高解像度の機種に見えますが、エッジモザイクの感覚があります。この時は、デザインモードのキャンバスサイズを調整することで、主流機種にフィットします。



####3、H 5での効果は正常に表示されています。ミニゲームがリリースされた後、エラーメッセージがJSONに関連しています。

小さいゲームの中でローカルの資源を読んでコードを検査しますので、プロジェクトの中で圧倒的に多くの非ピクチャのファイルのコードはASCIIです。だからエンジンはローカルインターフェースを呼び出してファイルを読みます。デフォルトの転送は小さいゲームのコードフォーマットはASCIIコードです。ローカルの初期パッケージのファイル（例えば、jsonファイル）のコードフォーマットはASCIIではないと、エラーが発生します。ですから、開発者はファイルのコードを確認してから通過します。`MiniAdpter['getUrlEncode']`このファイルの本当のコードは何かを教えてください。これで正しいコードでチェックすれば間違いありません。


```js

//告诉小游戏你的文件编码是什么
MiniAdpter['getUrlEncode'] = getUrlAndEncode;//假如getUrlAndEncode是开发者识别文件编码的方法
```


開発者がファイルコードを識別する方法の例（AS 3版）：


```javascript

//该方法示例仅做参考，视项目情况自行修改或拓展
public static var getUrlAndEncode:Function = function(url:String,type:String):String
{
	if (url.indexOf(".fnt") != -1 || url.indexOf("xxx.json") != -1) 
    {
		return "utf8";
	} else if (type == "arraybuffer") 
    {
		return "";
	}
	return "ascii";
}
```




また、ネットワークから動的に読み込み、エンコードのチェック制限はありません。したがって、jsonをインターネットに置いて動的に読み込みを行うこともできます。



####4、声がloaderでプリロードできません。

WeChatのミニゲームは音声ファイルをメモリにプリロードする使い方がサポートされていませんので、直接SoundMangerのオーディオ管理クラスで音声再生を行えばいいです。







###次の更新:

この文書では、開発者が微信小ゲームを開発する時に遭遇したよくある小さな問題をまとめて答えます。この文書に疑問があれば、公式サイトに質問してください。

コミュニティの開発者がフィードバックしたミニゲームによくある問題に対して、この文書は不定期的に更新されます。

コミュニティURL：https://ask.layabox.com/



##この文章は賞賛します

本論文があなたのために役立つと思ったら、スキャンコードの作者への賞賛を歓迎します。激励は私たちがより多くの優れた文書を書くための動力です。

![wechatPay](../../../wechatPay.jpg)