# 老项目适配微信小游戏详解

>author：charley

####いくつかの古いプロジェクトのために、小さなゲームのニーズがありますので、本編では、古いプロジェクトの適切な手順とリンクを詳しく紹介します。

**Tips:**文の中で3 Dプロジェクトの創建を始めとして、この篇が3 Dプロジェクトの適応だけであることを代表しません。本明細書では、適応案は2 Dと3 Dの両方に共通していますが、言語バージョンには少し違いがあります。

####必読のヒント:

>1、LayaAir IDEの1.7.15ベータ版から、WeChat型ゲームの3 Dサンプル作成プロジェクトをサポートします。
>
>2、本文を読む前に、まず『WeChatミニゲームを作成する』を読んでください。より多くの配置環境の基礎内容は本編では紹介しません。
>
>3、新しいゲームの項目は、直接的にゲームの例を作成することを提案します。審査時に作成された通常のプロジェクトであれば、本編のミニゲームの適応プロセスを学び、適応することができます。



###第1ステップ：例となるアイテムを作成します。(既存の古いアイテムはこのステップをスキップできます。)

まずLayaAirIDEを開けて、新規プロジェクトインターフェースに入ります。LayaAir 3 Dサンプル項目を選択します。

>Tips：本ステップは、旧プロジェクトの適応プロセスを実証するために、わざと一般的な3 Dサンプルプロジェクトを作成する。
>
>3 Dミニゲームの新規プロジェクトを作成する場合。直接選択**微信小遊戯3 D例**はい、ミニゲームのサンプルアイテムの中ではもうぴったりです。

![图1](img/1.png) 


プロジェクト名、パスを入力して、言語タイプとエンジンバージョンを選択してください。

>（基本的には流れが一致していますので、本編は各言語の開発者向けですが、TSプロジェクトの流れでスクリーンショットを行います。他の言語バージョンであれば、経路など紹介する必要がないところを除いて、違いがあります。追加的に説明します。）

OKです。続けます。

作成をクリックすると、3 Dプロジェクトの作成が完了します。



###第二ステップ：微信のミニゲームに適しています。

####1、ミニゲームが似合う前提準備

エンジンとIDEは最新のベータ版または安定版を使います。LayaAirIDEは1.7.15 betaバージョンから始まります。古いプロジェクトのワンタッチリリースをサポートしますので、古いバージョンIDEとエンジンライブラリでアップグレードしていません。先にアップグレードすることを忘れないでください。



####2、ミニゲームの適応ライブラリを参照する

#####TSとJSの適応方法

1.7.15ベータから、サンプルアイテムを作成すると、TSとJSのアイテムが自動的にミニゲーム適応ライブラリJSに導入されます。`“libs/laya.wxmini.js”`をクリックします。

![图](img/17.png) 


図中のコード:


```html

<!--提供了微信小游戏的适配-->
<script type="text/javascript" src="libs/laya.wxmini.js"></script>
```


1.7.15以前のTSやJSの古いプロジェクトであれば、開発者は`bin/index.html`に手動で図中の赤い枠の中のこのコードに参加して、また現在使っているのが1.7.15以降の新しいバージョンのエンジンライブラリであるかどうかを確認します。そうでなければ、新しいエンジンライブラリに切り替える必要があります。そうでなければ、運行時にlaya.wxmini.jsが見つからないため、エラーが発生します。

#####AS 3プロジェクトの適応方法

AS 3のプロジェクトは、1.7.15以降の新しいバージョンのエンジンライブラリを使用した後、開発者が入り口のクラスに手動でこのコードを追加するだけで、すぐに小さなゲームの適応ライブラリの導入を完了します。


```java

import laya.wx.mini.MiniAdpter;
```



####3、初期化ミニゲームの適応ライブラリ

古いプロジェクトは創立の時、プロジェクトの入り口で適応ライブラリを初期化していませんので、マイクロクレジットのゲームバージョンを成功的に発表することを保証するために、ゲームの入り口内で適応ライブラリの初期化を行わなければなりません。

**Tips**:*微信小ゲームを初期化するには、初期化エンジン前が必要です。*

#####TSとJSプロジェクトの適応方法は、下図のようになります。

![图](img/18.png) 


TSまたはJS項目の適応コードは以下の通りです。


```typescript

//初始化小游戏适配库
Laya.MiniAdpter.init();
```


#####AS 3プロジェクトの適合方法は下図の通りです。

![图](img/6.png) 


図中のAS 3項目の適合コードは以下の通りです。


```java

//微信小游戏适配
MiniAdpter.init();
```




####4、コンパイルコード

適合コードの追加を完了しました。コンパイルまたはデバッグボタン（F 5）をクリックして、エラーメッセージがなければ、3次元のキューブが見られます。

![图2](img/2.png) 


>Tips：ある程度のポイントを適応してコンパイルしたり、デバッグしたりしたら、適応コードは有効になりません。

実行デバッグのポップアップウィンドウを閉じます。ミニゲームの発表コーナーに入ることができます。

これで、ミニゲームの相性が完成しました。

簡単にまとめてみると、新版のエンジンを使った後、適応ライブラリを引用し、適応ライブラリを初期化するという二つの核心ステップです。やはり簡単です。

他のミニゲームのリリース、デバッグなどは新プロジェクトと共通しています。他の関連文書を見ることができます。

この文書に疑問があれば、公式サイトに質問してください。コミュニティの中のリンクを公式QQ群の中@管理人charleyに送ってもいいです。

コミュニティURL：https://ask.layabox.com/



##この文章は賞賛します

本論文があなたのために役立つと思ったら、スキャンコードの作者への賞賛を歓迎します。激励は私たちがより多くの優れた文書を書くための動力です。

![wechatPay](../../../wechatPay.jpg)